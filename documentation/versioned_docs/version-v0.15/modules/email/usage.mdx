import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Usage

## Configuring the provider

In order to start using  Email you need to configure it firstly!

:::caution

See how email [configuration](./config) works.
:::

## Proper imports
In order to start using the email module you need to do the proper imports.

```jsx title="Imports"
import ConduitGrpcSdk from '@conduitplatform/grpc-sdk';
```
## Sending an Email


```jsx title="Send an email"
await this.grpcSdk.sendEmail('template_name',{
    email : 'mail@example.com',
    sender: 'sendermail@example.com',
    variables: {
        'variable1' : 'variable_value',
    }
})
.catch(e => {
    ConduitGrpcSdk.Logger.error(e);
})
```

## Templates
Conduit provides a template mechanism. You can either create a template locally and store it also to the external provider,
or you can use the templates that are created only in the external provider.

### Template registration
Each stored template has two characteristics.
- **externalManaged** feature which is true if the template is stored also in the external provider.
- **externalId** , which is the template identification in the  external provider.

Before you send the request you need to know what **externalManaged** and **_id** variables are used for.

If **externalManaged** is set to true then:
- If **_id** variable is not set, then the template is going to be stored in the external provider
and the **externalId** is the same as the external template id.

- **Otherwise**, the template is created only in the conduit configured database and the **externalId**
is set to the given **_id**.


```jsx title="Template registration"
await this.grpcSdk.registerTemplate({
    name: 'template_name',
    subject: 'subject',
    body: '<p> Hello, {{user}}. I hope you are doing well.',
    variables: ['user']
})
.catch(e => {
    ConduitGrpcSdk.Logger.error(e);
})
```