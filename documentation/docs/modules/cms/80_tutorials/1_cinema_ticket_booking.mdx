---
sidebar_label: Cinema Ticket Booking
sidebar_position: 1
---

# Cinema Ticket Booking

**<ins>Scenario</ins>:**<br />
You are a building a ticket booking website for a cinema.<br />
You need a fast, yet efficient way to develop 

**<ins>Requirements</ins>:**<br />
Your website needs to keep track of movies, halls and projections.<br />
It should also be aware of ticket availability for the latter.<br />
In order to represent each one of these through types, we need to figure out their specifications.

A movie should have a name, a director, a duration and a release date.<br />
A hall needs a name, a number of seats and a class.<br />
A projection has relation fields to a movie and a hall, as well as a datetime field and 
a counter for the tickets sold for it.

All of the generated schemas come with unique identifiers and timestamps for creation and<br />
modification times out of the box, so we don't need to specify any of these ourselves.

Head to the admin panel's CMS page so we can begin creating our schemas.<br />
Here's a [reminder](../1_get-started.mdx/#create-schemas-example) for you in case you need 
to freshen up your memory on how to do that.

Make sure you don't disable CRUD operations or enable authentication for our simple tutorial.<br />

**<ins>Movies</ins>:**<br />
Create a new schema and name it `Movies`.<br />
A movie's name is a string, so drag a text field element into the schema fields area.<br />
After the field edit pane is brought up, sets its name to `name` and make it required, then press "OK".

Drag another text field, name it `director`, make it `required` and save that too.<br />
We are going to represent duration in minutes, so use a number field, name it `duration` and make that too required.<br />
At last, drag a date field into the schema area, name it `releaseDate`. Yeap, that's also required.

**TODO: ADD SCREENSHOT**

Our schema looks solid. Hit that save button ðŸ’¾.

**<ins>Halls</ins>:**<br />
Create a `Halls` schema, adding three required fields.<br />
A `name` text field, a `seats` number field and a `class` enum field (of type string).

Damn, you're getting good at this.

**<ins>Projections</ins>:**<br />
Last but not least, create a `Projections` schema to combine these two.<br />
Add two required relation fields. Name the first one `movie` and select `Movies` from the relation type dropdown.<br />
Now create a required `hall` field, setting its relation type to `Halls`.<br />
Use a date field to represent the `startTime` and make it required.<br />
At last, throw in a required `ticketsSold` number field.

We are going to use that last one to calculate the number of tickets available for sale based on the hall's seats down the road.






**TODO CONTINUE**

Hey, our client is on the phone, we have new requirements. Damn it!<br />
Tickets should now contain a unique identifier and support discounted prices.<br />
So how do we go about implementing these changes?

Let's create a new ticket schema.

**TODO**
**write this and explain how to apply migrations**



Custom Endpoints? Director name, pegi18...



Lets represent them as schemas and figure out their required fields.

|  Type               | Fields |
| :-----------------: | :----: |       
| Movie               | name, 
| Hall                | 
| Ticket Availability |

To keep things simple, we will not be implementing user authentication or payments in this example,<br />
but you can easily add these in later using the [authentication](../../authentication) and 
[payments](../../payments) modules.

Now, lets walk through the configuration process.<br />
Bring up the [Admin Panel] (TODO) and click on CMS in the list of available modules on the sidebar.

![Schema List View](/img/modules/cms/admin/schema_list_view.png)

You are now in the Schemas tab of the CMS module's settings.

Lets begin by registering a new schema for our movies.<br />
Clicking on the `Create New` button will prompt you for a type name, insert `Movies`.

You should now be greeted by the schema creation and modification view.<br />
We are going to specify a few sensible fields for our movie type.

![Schema Edit View](/img/modules/cms/admin/schema_edit_view_filled.png)

Drag a `Text` field element into our schema.<br />
A field modification pane should pop up on the right.<br />
This is going to be our movie's name field, so simply specify `name` as the field's name 
and toggle the `required` checkbox.<br />
This is going to make sure every movie entry has a name field.

**TODO**
**Simplify instructions, pointing to getting started and finnish tutorial**