---
sidebar_label: Schemas
sidebar_position: 1
---

# Schema Admin Routes

## Get Schema

|   Route                | Method |
| :--------------------: | :----: |
| /admin/cms/schemas/:id |  GET   |

Get a CMS schema by id.

### Url parameters

- id (string)

### Returns

A JSON object representation of the schema

```json title="Example Response"
{
    "_id": "61e7d4b95dadc501b101d086",
    "name": "citizens",
    "fields": {
        "firstName": {
            "type": "String",
            "unique": true,
            "required": true
        },
        "lastName": {
            "type": "String",
            "unique": true,
            "required": true
        },
        "ssn": {
            "type": "String",
            "unique": true,
            "required": true
        },
        "age": {
            "type": "Number",
            "required": true
        },
        "gender": {
            "type": "String"
        },
        "_id": "ObjectId",
        "createdAt": "Date",
        "updatedAt": "Date"
    },
    "modelOptions": {
        "timestamps": true,
        "conduit": {
            "cms": {
                "enabled": true,
                "authentication": false,
                "crudOperations": true
            },
            "permissions": {
                "extendable": true,
                "canCreate": true,
                "canModify": "Everything",
                "canDelete": true
            }
        }
    },
    "ownerModule": "cms",
    "createdAt": "2022-01-19T09:07:05.892Z",
    "updatedAt": "2022-01-19T09:07:05.892Z",
    "extensions": [],
    "__v": 0
}
```

-------------------------------------------------

## Get Schemas

|   Route            | Method |
| :----------------: | :----: |
| /admin/cms/schemas |  GET   |

Get CMS schemas.

### Query parameters

|     Name    |  Type   | Required | Description |
| :---------: | :-----: | :------: | :---------: |
| skip        | Integer |  False   |             |
| limit       | Integer |  False   |             |
| search      | String  |  False   |             |
| sort        | String  |  False   |             |
| enabled     | Boolean |  False   |             |

### Returns

- schemas (JSON)
- count (integer)

-------------------------------------------------

## Get Schemas From Other Modules

|   Route                                    | Method |
| :----------------------------------------: | :----: |
| /admin/cms/schemas/schemasFromOtherModules |  GET   |

Get foreign schemas.

### Returns

- externalSchemas (JSON)

-------------------------------------------------

## Create Schema

|   Route            | Method |
| :----------------: | :----: |
| /admin/cms/schemas |  POST  |

Create a CMS schema.
Schema names are **unique**.

### Body parameters

|     Name       |  Type   | Required | Description |
| :------------: | :-----: | :------: | :---------: |
| name           | String  |   True   | A **unique** name |
| fields         | JSON    |   True   |             |
| modelOptions   | JSON    |  False   |             |
| enabled        | Boolean |  False   |             |
| authentication | Boolean |  False   |             |
| crudOperations | Boolean |  False   |             |
| permissions    | JSON    |  False   |             |

fields: **TODO: EXPLAIN**

modelOptions: **TODO LINK**

permissions: **TODO LINK** 'Everything' | 'Nothing' | 'ExtensionOnly'

### Returns

A JSON object representation of the schema

### Example {#create-schema-example}

Send a **POST** request, including the necessary [authorization headers for an admin request] (TODO).

```json title="POST on /admin/cms/schemas"
{
  "name": "citizens",
  "fields": {
     "firstName": { "type": "String", "required": true },
     "lastName": { "type": "String", "required": true },
     "ssn": { "type": "String", "unique": true, "required": true },
     "age": { "type": "Number", "required": true },
     "gender": { "type": "String" }
  },
  "modelOptions": {"timestamps": true},
  "enabled": true,
  "crudOperations": true
}
```

```json title="Example Response"
{
    "name": "citizens",
    "modelSchema": {
        "firstName": {
            "type": "String",
            "unique": true,
            "required": true
        },
        "lastName": {
            "type": "String",
            "unique": true,
            "required": true
        },
        "ssn": {
            "type": "String",
            "unique": true,
            "required": true
        },
        "age": {
            "type": "Number"
        },
        "gender": {
            "type": "String"
        },
        "_id": "ObjectId",
        "createdAt": "Date",
        "updatedAt": "Date"
    },
    "modelOptions": {
        "timestamps": true,
        "conduit": {
            "cms": {
                "enabled": true,
                "authentication": false,
                "crudOperations": true
            },
            "permissions": {
                "extendable": true,
                "canCreate": true,
                "canModify": "Everything",
                "canDelete": true
            }
        }
    },
    "collectionName": "citizens"
}
```

-------------------------------------------------

## Patch Schema

|   Route                | Method  |
| :--------------------: | :-----: |
| /admin/cms/schemas/:id |  PATCH  |

Patch a CMS schema by id.

### Url parameters

- id (string)

### Body parameters

|     Name       |  Type   | Required | Description |
| :------------: | :-----: | :------: | :---------: |
| name           | String  |  False   |             |
| fields         | JSON    |  False   |             |
| modelOptions   | JSON    |  False   |             |
| enabled        | Boolean |  False   |             |
| authentication | Boolean |  False   |             |
| crudOperations | Boolean |  False   |             |
| permissions    | JSON    |  False   |             |

### Returns

A JSON object representation of the schema

-------------------------------------------------

## Delete Schema

|   Route                |  Method  |
| :--------------------: | :------: |
| /admin/cms/schemas/:id |  DELETE  |

Delete a CMS schema by id.

### Url parameters

- id (string)

### Body parameters

|     Name       |  Type   | Required | Description |
| :------------: | :-----: | :------: | :---------: |
| deleteData     | Boolean |  True    |             |

### Returns

- roomId (string)

-------------------------------------------------

## Delete Schemas

|   Route            | Method   |
| :----------------: | :------: |
| /admin/cms/schemas |  DELETE  |

Delete CMS schemas.

### Url parameters

- ids (string[])

### Body parameters

|     Name       |  Type   | Required | Description |
| :------------: | :-----: | :------: | :---------: |
| deleteData     | Boolean |  True    |             |

### Returns

'Schemas successfully deleted'

-------------------------------------------------

## Toggle Schema

|   Route                       | Method |
| :---------------------------: | :----: |
| /admin/cms/schemas/:id/toggle |  POST  |

Toggle the 'enabled' state of a CMS schema by id.

### Url parameters

- id (string)

### Returns

- name (string)
- enabled (boolean)

-------------------------------------------------

## Toggle Schemas

|   Route                   | Method |
| :-----------------------: | :----: |
| /admin/cms/schemas/toggle |  POST  |

Toggle the 'enabled' state of CMS schemas.

### Body parameters

|   Name      |  Type   | Required | Description |
| :---------: | :-----: | :------: | :---------: |
| ids         | String  |  True    |             |
| enabled     | Boolean |  True    |             |

### Returns

- updatedSchemas (JSON)
- enabled (boolean)

-------------------------------------------------

## Set Schema Permissions

|   Route                            | Method  |
| :--------------------------------: | :-----: |
| /admin/cms/schemas/:id/permissions |  PATCH  |

Set a CMS schema's permissions by id.

### Url parameters

- id (string)

### Body parameters

|     Name       |  Type   | Required | Description |
| :------------: | :-----: | :------: | :---------: |
| extendable     | Boolean |  False   |             |
| canCreate      | Boolean |  False   |             |
| canModify      | String  |  False   |             |
| canDelete      | Boolean |  False   |             |

### Returns

'Schema permissions updated successfully'
